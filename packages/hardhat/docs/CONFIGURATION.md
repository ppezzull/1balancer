# Hardhat Configuration Documentation

## Environment Variables and API Keys

### Objective of these API Keys:

#### 1. ALCHEMY_API_KEY

- **Purpose**: Provides RPC endpoint access to blockchain networks
- **Why needed**:
  - Connect to various EVM chains (Ethereum, Polygon, Arbitrum, Base, etc.)
  - Fork mainnet for local testing
  - Deploy contracts to live networks
- **Default provided**: Yes, but for development only

#### 2. ETHERSCAN_V2_API_KEY

- **Purpose**: Contract verification on block explorers
- **Why needed**:
  - Verify and publish contract source code after deployment
  - Makes contracts readable on Etherscan and other explorers
  - Essential for transparency and user trust
- **Default provided**: Yes, but rate-limited

#### 3. DEPLOYER_PRIVATE_KEY_ENCRYPTED

- **Purpose**: Deploy contracts from a specific account
- **Why needed**:
  - Sign deployment transactions
  - Pay gas fees for deployments
- **Security**: Encrypted, not plain text

### Best Practices Observed:

âœ… **This is NOT guessed - it follows Scaffold-ETH 2 best practices:**

1. **Encrypted Private Keys**:
   - Uses `DEPLOYER_PRIVATE_KEY_ENCRYPTED` instead of plain text
   - Generated via `yarn generate` or `yarn account:import` commands
   - The encryption/decryption happens in the account management scripts

2. **Fallback Values**:
   ```typescript
   const providerApiKey = process.env.ALCHEMY_API_KEY || "oKxs-03sij-U_N0iOlrSsZFr29-IqbuF";
   ```
   - Provides default API keys for quick prototyping
   - Developers can start immediately without API setup
   - Production apps should use their own keys

3. **Runtime Injection**:
   ```typescript
   process.env.__RUNTIME_DEPLOYER_PRIVATE_KEY
   ```
   - The `__RUNTIME_` prefix indicates the key is decrypted at runtime
   - Original encrypted key stays safe in `.env`

4. **Clear Documentation**:
   - `.env.example` provides template with instructions
   - Comments explain not to manually fill private keys
   - Directs users to use secure generation commands

5. **Network Configuration**:
   - BASE network configured (lines 105-112) for your deployment target
   - Multiple networks pre-configured for flexibility
   - All use the same secure key management

### Security Measures:

1. **No Plain Text Private Keys**: Never stored in `.env`
2. **Gitignored**: `.env` files excluded from version control
3. **Encryption Layer**: Private keys encrypted before storage
4. **Default Fallbacks**: Uses hardhat's default account for local dev

This setup allows developers to:
- Start developing immediately with defaults
- Securely manage keys for production
- Deploy to BASE (your target chain) and other networks
- Verify contracts automatically after deployment

The approach is standard for Scaffold-ETH 2 projects and represents current best practices in the Ethereum development ecosystem.

## Additional Context

**ALCHEMY_API_KEY**:
- Provides blockchain RPC endpoints to interact with networks
- Needed for deploying contracts, reading blockchain data, and forking mainnet
- The default key works but has rate limits - fine for development

**ETHERSCAN_V2_API_KEY**:
- Used to verify contracts on Etherscan after deployment
- Makes your contract source code publicly readable
- The default key is shared and rate-limited

**DEPLOYER_PRIVATE_KEY_ENCRYPTED**:
- This is the clever part - it's ENCRYPTED, not plain text
- Generated by `yarn generate` or `yarn account:import`
- Gets decrypted at runtime only when needed
- Never exposes raw private keys in files

The security approach is sophisticated:
1. Private keys are encrypted before storage
2. Decryption happens in memory during execution
3. Default values allow instant prototyping
4. Production requires your own API keys

This is standard Scaffold-ETH 2 architecture - they've thought through the security implications carefully. The encryption of private keys is particularly well done, avoiding the common mistake of storing raw private keys in .env files.